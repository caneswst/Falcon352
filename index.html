<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>傲翔2025丙組戰術板</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Roboto:wght@400;700&display=swap');

        body {
            display: flex;
            flex-direction: column;
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #2a2a2a, #3f3f3f);
            color: #fff;
            overflow-x: hidden;
        }
        #header {
            text-align: center;
            padding: 15px 0;
            background: linear-gradient(90deg, #b22222, #8b1a1a);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
        }
        #header h1 {
            font-family: 'Bebas Neue', cursive;
            font-size: 24px;
            margin: 0;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        .container {
            display: flex;
            justify-content: space-between;
            padding: 20px;
        }
        #pitch-container {
            width: 50%;
            position: relative;
            background: url('https://raw.githubusercontent.com/caneswst/Falcon352/refs/heads/main/football_pitch.jpg') no-repeat center;
            background-size: contain;
            height: 800px;
            border: 2px solid #b22222;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(178, 34, 34, 0.3);
        }
        .player {
            position: absolute;
            width: 40px;
            height: 40px;
            background: #8b1a1a;
            border-radius: 50%;
            color: #fff;
            text-align: center;
            line-height: 40px;
            cursor: pointer;
            font-size: 14px;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .player:hover {
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(139, 26, 26, 0.6);
        }
        #left-panel, #right-panel {
            width: 24%;
            height: 800px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(8px);
            border-radius: 8px;
            overflow-y: auto;
            box-shadow: 0 0 10px rgba(178, 34, 34, 0.2);
            transition: transform 0.3s;
        }
        #left-panel:hover, #right-panel:hover {
            transform: translateY(-3px);
        }
        select {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border-radius: 5px;
            background: #333;
            color: #fff;
            border: 1px solid #b22222;
            font-size: 14px;
        }
        h2, h3 {
            color: #b22222;
            font-family: 'Bebas Neue', cursive;
        }
        .position-info {
            display: none;
            line-height: 1.6;
            background: rgba(255, 255, 255, 0.03);
            padding: 10px;
            border-radius: 5px;
        }
        .position-info p {
            margin: 5px 0;
        }
        .position-info strong {
            color: #b22222;
        }
        #subs-list {
            margin-top: 10px;
        }
        #formation-select {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            font-size: 16px;
            background: #b22222;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        #formation-select:hover {
            background: #8b1a1a;
        }
    </style>
</head>
<body>
    <div id="header">
        <h1>傲翔2025丙組戰術板</h1>
    </div>
    <div class="container">
        <div id="left-panel">
            <h2>陣容選擇</h2>
            <label>選擇陣型:</label>
            <select id="formation-select">
                <option value="352-offensive">3-5-2 進攻陣</option>
                <option value="352-defensive">3-5-2 防守陣</option>
                <option value="451-defensive">4-5-1 防守陣</option>
            </select>
            <div id="positions-container"></div>
            <h3>後備球員</h3>
            <div id="subs-list"></div>
        </div>

        <div id="pitch-container"></div>

        <div id="right-panel">
            <h2>點選顯示各位置戰術要求</h2>
            <div id="position-details"></div>
        </div>
    </div>

    <script>
        const players = ['新', '禮', '東', 'Vasco', 'Alex', '光', '航', 'Xander', 'Nate', '軍C', '俊', 'Joe', '杰', '銳', 'Mike', 'Dan', '銘', '達', 'Hugo', 'Ivan', '業', '甘', '雷公', '鬼佬', 'Ken', '家興'];

        const formations = {
            '352-offensive': {
                positions: ['gk', 'lcb', 'cb', 'rcb', 'lwb', 'lm', 'cam', 'rm', 'rwb', 'lst', 'rst'],
                layout: {
                    'gk': { left: '50%', top: '90%' },
                    'lcb': { left: '30%', top: '70%' },
                    'cb': { left: '50%', top: '70%' },
                    'rcb': { left: '70%', top: '70%' },
                    'lwb': { left: '20%', top: '50%' },
                    'lm': { left: '35%', top: '40%' },
                    'cam': { left: '50%', top: '30%' },
                    'rm': { left: '65%', top: '40%' },
                    'rwb': { left: '80%', top: '50%' },
                    'lst': { left: '40%', top: '15%' },
                    'rst': { left: '60%', top: '15%' }
                },
                details: {
                    'gk': { name: '門將 (GK)', tactics: '作為防守的最後一道屏障，負責守護球門並快速發動反擊，同時組織後衛線保持緊密防守。需要具備出色的單對單能力和心理素質，能在高壓環境下穩定發揮。', tech: '撲救 90, 手控球 85, 開球 80, 反應 95, 位置感 88', off: '站在禁區外圍，參與後場短傳組織，必要時利用長傳找到前場快速球員，直接發動進攻。', def: '守住球門線，保持冷靜判斷射門角度，快速反應撲救遠射或近距離射門，必要時果斷出擊攔截單刀球或高空球。', example: 'Manuel Neuer - 現代「掃蕩型門將」的代表，擅長出擊防守和用腳傳球，改變了門將的傳統角色。' },
                    'lcb': { name: '左中後衛 (LCB)', tactics: '負責防守左側區域並在前場提供支援，與左翼衛協作形成邊路進攻威脅，同時在中路補位保持防線穩定。需要具備良好的空中爭頂能力和戰術意識。', tech: '頭球 85, 搶斷 88, 傳球 80, 防守站位 90, 速度 75', off: '適當前壓至中場線附近，參與短傳組織，支援左翼衛推進並為中場提供分球選擇。', def: '退守禁區左側，與中後衛緊密協作，盯防對方右邊鋒或內切前鋒，負責清空禁區內的高空球和傳中威脅。', example: 'Giorgio Chiellini - 防守硬朗，頭球能力出色，擅長人盯人防守和關鍵攔截。' },
                    'cb': { name: '中後衛 (CB)', tactics: '三後衛體系的核心，負責統籌防線，盯防對方中鋒並清掃禁區內的所有威脅，同時承擔防守指揮責任。需要頂級的防守閱讀能力和領導力。', tech: '頭球 90, 搶斷 92, 傳球 85, 防守站位 95, 力量 88', off: '留在後場中路，分球至中場或邊路，必要時帶球前插支援中場，參與進攻組織的第一步。', def: '坐鎮禁區中央，負責高空球防守和對方中鋒的直接對抗，快速補位並指揮隊友站位，確保防線不被突破。', example: 'Virgil van Dijk - 現代中後衛的典範，防守全面且具備出球能力，場上領導力極強。' },
                    'rcb': { name: '右中後衛 (RCB)', tactics: '負責防守右側區域並在前場提供支援，與右翼衛協作形成邊路進攻威脅，同時在中路補位保持防線穩定。需要具備穩定的防守意識和協作能力。', tech: '頭球 85, 搶斷 88, 傳球 80, 防守站位 90, 速度 75', off: '適當前壓至中場線附近，參與短傳組織，支援右翼衛推進並為中場提供分球選擇。', def: '退守禁區右側，與中後衛緊密協作，盯防對方左邊鋒或內切前鋒，負責清空禁區內的高空球和傳中威脅。', example: 'Sergio Ramos - 防守兇悍且進攻能力強，定位球得分能力突出，防守經驗豐富。' },
                    'lwb': { name: '左翼衛 (LWB)', tactics: '負責左邊路的進攻與防守，提供場地寬度並支援前鋒，是進攻陣型中的關鍵角色。需要出色的往返能力和邊路突破技術。', tech: '速度 90, 傳中 85, 盤帶 80, 防守 75, 體力 90', off: '前插至對方半場邊線，傳中至禁區或內切配合前鋒，直接參與進攻並製造威脅。', def: '回撤至左後衛位置，封堵對方右邊鋒的突破或傳中，協助左中後衛防守邊路空位，保持防守穩定。', example: 'Marcelo - 進攻型翼衛的代表，盤帶和傳中技術一流，邊路進攻能力突出。' },
                    'lm': { name: '左中場 (LM)', tactics: '支援左邊路進攻並提供中場銜接，與左翼衛和進攻中場形成聯繫，增強中場的進攻火力。需要具備一定的創造力和跑動能力。', tech: '傳球 85, 盤帶 80, 射門 75, 體力 85, 速度 88', off: '內切至禁區外圍尋找射門機會，或傳中至前鋒，與左翼衛配合撕開對方防線。', def: '協助左翼衛防守邊路，壓迫對方右後衛或中場，必要時回撤至中場線參與防守。', example: 'Bernardo Silva - 技術細膩且跑動積極，擅長在中場創造機會和支援邊路。' },
                    'cam': { name: '進攻中場 (CAM)', tactics: '組織進攻並為前鋒創造得分機會，是中場進攻的核心樞紐。需要出色的視野和傳球能力，能在關鍵時刻改變比賽走向。', tech: '視野 90, 傳球 88, 盤帶 85, 射門 80, 靈活性 88', off: '位於禁區外圍，分球至雙前鋒或邊路，尋找遠射機會或直塞撕開對方防線。', def: '壓迫對方後腰或中場核心，協助中場防守，必要時回撤至中場線參與防守轉換。', example: 'Kevin De Bruyne - 傳球大師，視野開闊且遠射能力強，是進攻中場的頂級代表。' },
                    'rm': { name: '右中場 (RM)', tactics: '支援右邊路進攻並提供中場銜接，與右翼衛和進攻中場形成聯繫，增強中場的進攻火力。需要具備一定的創造力和跑動能力。', tech: '傳球 85, 盤帶 80, 射門 75, 體力 85, 速度 88', off: '內切至禁區外圍尋找射門機會，或傳中至前鋒，與右翼衛配合撕開對方防線。', def: '協助右翼衛防守邊路，壓迫對方左後衛或中場，必要時回撤至中場線參與防守。', example: 'Jadon Sancho - 盤帶出色且傳球精準，擅長邊路突破和中場支援。' },
                    'rwb': { name: '右翼衛 (RWB)', tactics: '負責右邊路的進攻與防守，提供場地寬度並支援前鋒，是進攻陣型中的關鍵角色。需要出色的往返能力和邊路突破技術。', tech: '速度 90, 傳中 85, 盤帶 80, 防守 75, 體力 90', off: '前插至對方半場邊線，傳中至禁區或內切配合前鋒，直接參與進攻並製造威脅。', def: '回撤至右後衛位置，封堵對方左邊鋒的突破或傳中，協助右中後衛防守邊路空位，保持防守穩定。', example: 'Trent Alexander-Arnold - 傳中精準且具備出色的進攻意識，是現代翼衛的典範。' },
                    'lst': { name: '左前鋒 (LST)', tactics: '拉開對方防線並尋找得分機會，與右前鋒和進攻中場形成進攻三角，承擔主要的進攻終結任務。需要出色的突破和射門能力。', tech: '射門 88, 速度 90, 盤帶 88, 傳球 80, 靈活性 90', off: '位於禁區左側，內切射門或傳中給右前鋒，快速利用空位製造威脅，與隊友配合完成進攻。', def: '壓迫對方右後衛或右中後衛，參與前場防守，爭搶第二落點並阻斷對方後場出球。', example: 'Neymar - 技術細膩且突破能力強，擅長內切得分和創造機會。' },
                    'rst': { name: '右前鋒 (RST)', tactics: '拉開對方防線並尋找得分機會，與左前鋒和進攻中場形成進攻三角，承擔主要的進攻終結任務。需要出色的突破和射門能力。', tech: '射門 88, 速度 90, 盤帶 88, 傳球 80, 靈活性 90', off: '位於禁區右側，內切射門或傳中給左前鋒，快速利用空位製造威脅，與隊友配合完成進攻。', def: '壓迫對方左後衛或左中後衛，參與前場防守，爭搶第二落點並阻斷對方後場出球。', example: 'Lionel Messi - 技術與創造力的巔峰，右路內切無人能敵，得分和助攻能力頂尖。' }
                }
            },
            '352-defensive': {
                positions: ['gk', 'lcb', 'cb', 'rcb', 'lwb', 'lcm', 'rcm', 'rwb', 'lst', 'st', 'rst'],
                layout: {
                    'gk': { left: '50%', top: '90%' },
                    'lcb': { left: '30%', top: '70%' },
                    'cb': { left: '50%', top: '70%' },
                    'rcb': { left: '70%', top: '70%' },
                    'lwb': { left: '20%', top: '55%' },
                    'lcm': { left: '40%', top: '50%' },
                    'rcm': { left: '60%', top: '50%' },
                    'rwb': { left: '80%', top: '55%' },
                    'lst': { left: '35%', top: '30%' },
                    'st': { left: '50%', top: '25%' },
                    'rst': { left: '65%', top: '30%' }
                },
                details: {
                    'gk': { name: '門將 (GK)', tactics: '作為防守的最後一道屏障，負責守護球門並組織防線，快速發動防守反擊。需要與後衛保持高效溝通，掌控禁區內的防守布局。', tech: '撲救 90, 手控球 85, 開球 80, 反應 95, 位置感 88', off: '站在禁區外圍，支援後衛進行短傳分球，必要時利用長傳找到前場快速球員發動反擊。', def: '守住球門線，保持冷靜，快速判斷射門角度並作出反應，必要時果斷出擊攔截單刀球或高空球。', example: 'Manuel Neuer - 現代「掃蕩型門將」的代表，擅長出擊防守和用腳傳球，改變了門將的傳統角色。' },
                    'lcb': { name: '左中後衛 (LCB)', tactics: '負責防守左側區域，協助左翼衛封堵邊路進攻，同時在中路提供補位支援，是三後衛體系的重要支柱。', tech: '頭球 88, 搶斷 90, 傳球 80, 防守站位 90, 速度 75', off: '穩固後場，適時分球至左翼衛或中場，保持防守陣型的完整性。', def: '退守禁區左側，與中後衛協作，緊盯對方右邊鋒或內切前鋒，負責清空禁區內的高空球和傳中威脅。', example: 'Giorgio Chiellini - 防守硬朗，頭球能力出色，擅長人盯人防守和關鍵攔截。' },
                    'cb': { name: '中後衛 (CB)', tactics: '三後衛體系的核心，負責統籌防線，盯防對方中鋒並清掃禁區內的所有威脅，同時承擔防守指揮責任。', tech: '頭球 92, 搶斷 95, 傳球 85, 防守站位 95, 力量 90', off: '留在後場中路，分球至中場或邊路，必要時帶球前插支援中場防守轉換。', def: '坐鎮禁區中央，負責高空球防守和對方中鋒的直接對抗，快速補位並指揮隊友站位。', example: 'Virgil van Dijk - 現代中後衛的典範，防守全面且具備出球能力，場上領導力極強。' },
                    'rcb': { name: '右中後衛 (RCB)', tactics: '負責防守右側區域，協助右翼衛封堵邊路進攻，同時在中路提供補位支援，與左中後衛協作保持防線平衡。', tech: '頭球 88, 搶斷 90, 傳球 80, 防守站位 90, 速度 75', off: '穩固後場，適時分球至右翼衛或中場，保持防守陣型的完整性。', def: '退守禁區右側，與中後衛協作，緊盯對方左邊鋒或內切前鋒，負責清空禁區內的高空球和傳中威脅。', example: 'Sergio Ramos - 防守兇悍且進攻能力強，定位球得分能力突出，防守經驗豐富。' },
                    'lwb': { name: '左翼衛 (LWB)', tactics: '防守左邊路為主，輔以少量前插支援進攻，提供場地寬度並與左中後衛協作形成穩固防線。', tech: '速度 85, 搶斷 88, 傳中 80, 防守站位 85, 體力 90', off: '支援中場防守，適時前插至中場線附近，分球至中場或左前鋒。', def: '回撤至左後衛位置，封堵對方右邊鋒的突破或傳中，協助左中後衛防守邊路空位。', example: 'Marcelo - 進攻型翼衛的代表，防守穩健且具備一定的邊路推進能力。' },
                    'lcm': { name: '左中場 (LCM)', tactics: '防守型雙後腰之一，負責中場左側的防守與銜接，保護後衛並與右中場協作，提供中場穩定性。', tech: '傳球 85, 搶斷 90, 視野 88, 跑動 85, 防守站位 88', off: '分球至邊路或前鋒，保持中場防守陣型的完整性，必要時支援左翼衛。', def: '壓迫對方中場球員，負責中場左側的搶斷和補位，保護左中後衛免受直接衝擊。', example: 'N’Golo Kanté - 防守覆蓋面廣，搶斷能力頂尖，是中場防守的標杆。' },
                    'rcm': { name: '右中場 (RCM)', tactics: '防守型雙後腰之一，負責中場右側的防守與銜接，保護後衛並與左中場協作，提供中場穩定性。', tech: '傳球 85, 搶斷 90, 視野 88, 跑動 85, 防守站位 88', off: '分球至邊路或前鋒，保持中場防守陣型的完整性，必要時支援右翼衛。', def: '壓迫對方中場球員，負責中場右側的搶斷和補位，保護右中後衛免受直接衝擊。', example: 'Casemiro - 防守硬朗且傳球穩健，是防守型後腰的經典代表。' },
                    'rwb': { name: '右翼衛 (RWB)', tactics: '防守右邊路為主，輔以少量前插支援進攻，提供場地寬度並與右中後衛協作形成穩固防線。', tech: '速度 85, 搶斷 88, 傳中 80, 防守站位 85, 體力 90', off: '支援中場防守，適時前插至中場線附近，分球至中場或右前鋒。', def: '回撤至右後衛位置，封堵對方左邊鋒的突破或傳中，協助右中後衛防守邊路空位。', example: 'Kyle Walker - 速度快且防守穩固，具備一定的邊路推進能力。' },
                    'lst': { name: '左前鋒 (LST)', tactics: '防守反擊的重要一環，負責拉開防線並尋找得分機會，與中前鋒和右前鋒形成聯繫。', tech: '速度 90, 射門 85, 盤帶 88, 傳球 80, 靈活性 90', off: '拉至禁區左側，內切射門或傳中給中前鋒，快速利用反擊機會得分。', def: '壓迫對方右後衛或右中後衛，參與前場防守並爭搶第二落點。', example: 'Son Heung-min - 速度快且射門精準，擅長邊路突破和內切得分。' },
                    'st': { name: '中前鋒 (ST)', tactics: '防守反擊的核心，負責終結進攻並牽制對方後衛，是前場的支點和得分主力。', tech: '射門 90, 位置感 92, 力量 88, 頭球 85, 搶點 90', off: '位於禁區中央，接應中場傳球完成射門，或為隊友製造空間。', def: '壓迫對方中後衛，爭搶第一落點並參與前場防守。', example: 'Harry Kane - 射門效率高且全面，是現代中鋒的典範。' },
                    'rst': { name: '右前鋒 (RST)', tactics: '防守反擊的重要一環，負責拉開防線並尋找得分機會，與中前鋒和左前鋒形成聯繫。', tech: '速度 90, 射門 85, 盤帶 88, 傳球 80, 靈活性 90', off: '拉至禁區右側，內切射門或傳中給中前鋒，快速利用反擊機會得分。', def: '壓迫對方左後衛或左中後衛，參與前場防守並爭搶第二落點。', example: 'Kylian Mbappé - 速度驚人且技術全面，是防守反擊的致命武器。' }
                }
            },
            '451-defensive': {
                positions: ['gk', 'lb', 'lcb', 'rcb', 'rb', 'lm', 'lcm', 'cdm', 'rcm', 'rm', 'st'],
                layout: {
                    'gk': { left: '50%', top: '90%' },
                    'lb': { left: '20%', top: '70%' },
                    'lcb': { left: '40%', top: '70%' },
                    'rcb': { left: '60%', top: '70%' },
                    'rb': { left: '80%', top: '70%' },
                    'lm': { left: '20%', top: '45%' },
                    'lcm': { left: '35%', top: '40%' },
                    'cdm': { left: '50%', top: '45%' },
                    'rcm': { left: '65%', top: '40%' },
                    'rm': { left: '80%', top: '45%' },
                    'st': { left: '50%', top: '20%' }
                },
                details: {
                    'gk': { name: '門將 (GK)', tactics: '作為防守的最後一道屏障，負責守護球門並快速分球發動反擊，同時組織後衛線保持緊密防守。需要具備出色的單對單能力和心理素質，能在高壓環境下穩定發揮。', tech: '撲救 90, 手控球 85, 開球 80, 反應 95, 位置感 88', off: '站在禁區外圍，參與後場短傳組織，必要時長傳至前鋒或邊路發動快速反擊。', def: '守住球門線，保持冷靜判斷射門角度，快速反應撲救遠射或近距離射門，必要時果斷出擊攔截單刀球或高空球。', example: 'Manuel Neuer - 現代「掃蕩型門將」的代表，擅長出擊防守和用腳傳球，改變了門將的傳統角色。' },
                    'lb': { name: '左後衛 (LB)', tactics: '負責防守左路並穩固邊線，協助中後衛形成緊密的四後衛防線，是防守陣型中的邊路屏障。需要具備穩定的防守能力和一定的支援意識。', tech: '搶斷 88, 速度 85, 傳球 80, 防守站位 90, 體力 85', off: '支援中場分球，少量前插至中場線附近，為左中場提供分球選擇並參與防守轉換。', def: '封堵對方右邊鋒的突破或傳中，退守禁區左側補位，與左中後衛協作防守邊路和中路空位。', example: 'Andrew Robertson - 防守穩健且跑動積極，擅長邊路防守和支援中場。' },
                    'lcb': { name: '左中後衛 (LCB)', tactics: '負責防守中路並清空禁區威脅，與右中後衛協作形成堅固的防線核心，承擔主要的空中防守和盯人任務。需要頂級的防守閱讀能力和身體對抗能力。', tech: '頭球 90, 搶斷 92, 傳球 85, 力量 88, 防守站位 90', off: '分球至中場或邊路，保持後場穩定，必要時帶球前插支援中場防守轉換。', def: '位於禁區左側，盯防對方前鋒或內切球員，清空高空球和傳中威脅，快速補位確保防線完整。', example: 'Virgil van Dijk - 防守全面且具備出球能力，是現代中後衛的頂級代表。' },
                    'rcb': { name: '右中後衛 (RCB)', tactics: '負責防守中路並清空禁區威脅，與左中後衛協作形成堅固的防線核心，承擔主要的空中防守和盯人任務。需要出色的防守意識和身體素質。', tech: '頭球 90, 搶斷 92, 傳球 85, 力量 88, 防守站位 90', off: '分球至中場或邊路，保持後場穩定，必要時帶球前插支援中場防守轉換。', def: '位於禁區右側，盯防對方前鋒或內切球員，清空高空球和傳中威脅，快速補位確保防線完整。', example: 'Sergio Ramos - 防守兇悍且經驗豐富，定位球得分能力強，是中後衛的經典代表。' },
                    'rb': { name: '右後衛 (RB)', tactics: '負責防守右路並穩固邊線，協助中後衛形成緊密的四後衛防線，是防守陣型中的邊路屏障。需要具備穩定的防守能力和一定的支援意識。', tech: '搶斷 88, 速度 85, 傳球 80, 防守站位 90, 體力 85', off: '支援中場分球，少量前插至中場線附近，為右中場提供分球選擇並參與防守轉換。', def: '封堵對方左邊鋒的突破或傳中，退守禁區右側補位，與右中後衛協作防守邊路和中路空位。', example: 'Kyle Walker - 速度快且防守穩固，擅長邊路防守和快速回防。' },
                    'lm': { name: '左中場 (LM)', tactics: '負責防守左邊路並支援快速反擊，提供場地寬度並與左後衛協作形成邊路防守網。需要出色的跑動能力和邊路技術。', tech: '傳中 85, 體力 90, 速度 88, 傳球 80, 搶斷 85', off: '拉邊傳中至前鋒，參與快速反擊，與左中場配合製造進攻機會。', def: '回防壓迫對方右後衛或右邊鋒，協助左後衛防守邊路，必要時退守至後場參與防守。', example: 'Son Heung-min - 速度快且技術全面，擅長邊路突破和支援防守。' },
                    'lcm': { name: '左中場 (LCM)', tactics: '負責防守中場左側並銜接攻防，與防守中場和右中場協作，形成中場防守屏障並支援反擊。需要良好的戰術理解力和傳球能力。', tech: '傳球 88, 搶斷 85, 視野 90, 跑動 85, 防守站位 88', off: '分球至邊路或前鋒，支援中場組織，必要時前插至禁區外圍參與進攻。', def: '壓迫對方中場左側球員，協助防守中場搶斷和補位，保護後衛免受直接衝擊。', example: 'Toni Kroos - 傳球精準且防守穩健，擅長中場組織和控制節奏。' },
                    'cdm': { name: '防守中場 (CDM)', tactics: '保護後衛並斷球，是中場防守的核心樞紐，負責壓迫對方進攻球員並穩固中場陣型。需要頂級的搶斷能力和體力。', tech: '搶斷 92, 傳球 85, 體力 90, 防守站位 90, 力量 88', off: '穩固中場，分球至邊路或中場，必要時帶球推進支援反擊。', def: '位於中場核心，壓迫對方進攻球員，負責搶斷和補位，保護四後衛線免受直接威脅。', example: 'N’Golo Kanté - 防守覆蓋面廣，搶斷能力頂尖，是防守中場的標杆。' },
                    'rcm': { name: '右中場 (RCM)', tactics: '負責防守中場右側並銜接攻防，與防守中場和左中場協作，形成中場防守屏障並支援反擊。需要良好的戰術理解力和傳球能力。', tech: '傳球 88, 搶斷 85, 視野 90, 跑動 85, 防守站位 88', off: '分球至邊路或前鋒，支援中場組織，必要時前插至禁區外圍參與進攻。', def: '壓迫對方中場右側球員，協助防守中場搶斷和補位，保護後衛免受直接衝擊。', example: 'Luka Modrić - 技術全面且防守積極，擅長中場控制和攻防轉換。' },
                    'rm': { name: '右中場 (RM)', tactics: '負責防守右邊路並支援快速反擊，提供場地寬度並與右後衛協作形成邊路防守網。需要出色的跑動能力和邊路技術。', tech: '傳中 85, 體力 90, 速度 88, 傳球 80, 搶斷 85', off: '拉邊傳中至前鋒，參與快速反擊，與右中場配合製造進攻機會。', def: '回防壓迫對方左後衛或左邊鋒，協助右後衛防守邊路，必要時退守至後場參與防守。', example: 'Bukayo Saka - 速度快且技術出色，擅長邊路突破和支援防守。' },
                    'st': { name: '中前鋒 (ST)', tactics: '防守反擊的終結者，負責牽制對方後衛並完成得分，是前場的唯一支點和進攻核心。需要出色的門前嗅覺和得分效率。', tech: '射門 90, 速度 88, 位置感 92, 力量 88, 搶點 90', off: '位於禁區中央，接應中場傳球完成射門，或利用速度和力量製造單刀機會。', def: '壓迫對方中後衛，爭搶第一落點並參與前場防守，阻斷對方後場出球。', example: 'Harry Kane - 射門效率高且全面，擅長禁區內搶點和遠射，是現代中鋒的典範。' }
                }
            }
        };

        let selectedPlayersByFormation = {
            '352-offensive': {},
            '352-defensive': {},
            '451-defensive': {}
        };
        let currentFormation = '352-defensive'; // 默認陣型

        // 初始化陣型選擇
        function initFormationSelect() {
            const formationSelect = document.getElementById('formation-select');
            formationSelect.onchange = () => {
                currentFormation = formationSelect.value;
                updateFormation();
                updatePitchAndSubs();
            };
            updateFormation();
            loadSavedSelections();
        }

        // 更新陣型相關內容
        function updateFormation() {
            const formation = formations[currentFormation];
            const positionsContainer = document.getElementById('positions-container');
            const pitchContainer = document.getElementById('pitch-container');
            const positionDetails = document.getElementById('position-details');

            // 更新左側選單
            positionsContainer.innerHTML = '';
            formation.positions.forEach(pos => {
                positionsContainer.innerHTML += `
                    <label>${formation.details[pos].name}:</label>
                    <select id="${pos}"><option value="">選擇球員</option>${players.map(p => `<option value="${p}">${p}</option>`).join('')}</select>
                `;
            });

            // 更新戰術板
            pitchContainer.innerHTML = '';
            formation.positions.forEach(pos => {
                const playerDiv = document.createElement('div');
                playerDiv.className = 'player';
                playerDiv.id = `${pos}-player`;
                playerDiv.style.left = formation.layout[pos].left;
                playerDiv.style.top = formation.layout[pos].top;
                playerDiv.textContent = pos.toUpperCase();
                playerDiv.onclick = () => showPositionDetails(pos);
                pitchContainer.appendChild(playerDiv);
            });

            // 更新右側詳情
            positionDetails.innerHTML = '';
            formation.positions.forEach(pos => {
                const info = formation.details[pos];
                positionDetails.innerHTML += `
                    <div id="${pos}-info" class="position-info">
                        <h3>${info.name}</h3>
                        <p><strong>戰術要求:</strong> ${info.tactics}</p>
                        <p><strong>技術要求:</strong> ${info.tech}</p>
                        <p><strong>進攻時位置要求:</strong> ${info.off}</p>
                        <p><strong>防守時位置要求:</strong> ${info.def}</p>
                        <p><strong>代表球員:</strong> ${info.example}</p>
                    </div>
                `;
            });

            // 為每個下拉選單添加事件並加載保存的選擇
            formation.positions.forEach(pos => {
                const select = document.getElementById(pos);
                select.onchange = updatePitchAndSubs;
                if (selectedPlayersByFormation[currentFormation][pos]) {
                    select.value = selectedPlayersByFormation[currentFormation][pos];
                }
            });

            updatePitchAndSubs();
        }

        // 更新戰術板和後備名單
        function updatePitchAndSubs() {
            const formation = formations[currentFormation];
            const selected = new Set();
            formation.positions.forEach(pos => {
                const select = document.getElementById(pos);
                const playerDiv = document.getElementById(pos + '-player');
                const selectedPlayer = select.value;
                playerDiv.textContent = selectedPlayer || pos.toUpperCase();
                selectedPlayersByFormation[currentFormation][pos] = selectedPlayer;
                if (selectedPlayer) selected.add(selectedPlayer);
            });

            // 更新後備名單
            const subsList = document.getElementById('subs-list');
            const subs = players.filter(p => !selected.has(p));
            subsList.innerHTML = subs.map(p => `<p>${p}</p>`).join('');

            // 保存選擇到本地存儲
            localStorage.setItem('selectedPlayersByFormation', JSON.stringify(selectedPlayersByFormation));
            localStorage.setItem('currentFormation', currentFormation);
        }

        // 載入上次保存的選擇
        function loadSavedSelections() {
            const savedFormation = localStorage.getItem('currentFormation');
            const savedPlayers = localStorage.getItem('selectedPlayersByFormation');
            if (savedFormation) {
                currentFormation = savedFormation;
                document.getElementById('formation-select').value = savedFormation;
            }
            if (savedPlayers) {
                selectedPlayersByFormation = JSON.parse(savedPlayers);
            }
            updateFormation();
        }

        // 顯示位置詳情
        function showPositionDetails(pos) {
            document.querySelectorAll('.position-info').forEach(info => info.style.display = 'none');
            const infoDiv = document.getElementById(pos + '-info');
            if (infoDiv) infoDiv.style.display = 'block';
        }

        initFormationSelect();
    </script>
</body>
</html>
